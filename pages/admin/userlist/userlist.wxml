<include src="../../../utils/alert/alert.wxml" />
<loading hidden="{{!loading}}">
  loading...
</loading>
<view class="page">
  <view class="page__hd">
    <view class="page__title">User List</view>
  </view>
  <view class="page__bd">
    <block wx:if="{{userList.length > 0}}">
      <view class="weui-form-preview" wx:for="{{userList}}" wx:key="userItem">
        <view class="weui-form-preview__bd">
          <view class="weui-form-preview__item">
            <view class="weui-form-preview__label">Name</view>
            <view class="weui-form-preview__value">{{item.realName}}</view>
          </view>
          <view class="weui-form-preview__item">
            <view class="weui-form-preview__label">Phone</view>
            <view class="weui-form-preview__value">{{item.phone}}</view>
          </view>
          <view class="weui-form-preview__item">
            <view class="weui-form-preview__label">Date</view>
            <view class="weui-form-preview__value">{{item.updatedAt}}</view>
          </view>
        </view>
        <view class="weui-form-preview__ft">
          <button class="weui-form-preview__btn weui-form-preview__btn_default" hover-class="weui-form-preview__btn_active" catchtap="deleteUserBtnClick" data-id="{{item.objectId}}">Delete</button>
          <button class="weui-form-preview__btn weui-form-preview__btn_primary" hover-class="weui-form-preview__btn_active" catchtap="modifyUserBtnClick" data-id="{{item.objectId}}" data-name="{{item.realName}}" data-phone="{{item.phone}}">Edit</button>
        </view>
      </view>
    </block>
    <view class="weui-form-preview__bd" wx:else>
      <view class="weui-form-preview__value_in-hd">No User in the list</view>
    </view>
  </view>
</view>


<!-- Modify User Panel -->
<view class="notice" id="notice" style="opacity: 1;" wx:if="{{isModifyUser}}">
  <view class='box'>
    <view class="weui-mask"></view>
    <view class="weui-dialog">
      <view class="weui-dialog__hd">
        <strong class="weui-dialog__title">Edit User</strong>
      </view>
      <form bindsubmit="modifyUserForm">
        <view class="weui-dialog__bd">
          <view class="weui-cells__h1">Name</view>
          <view class="weui-cells weui-cells_after-title">
            <view class="weui-cell weui-cell_input">
              <view class="weui-cell__bd">
                <input class="weui-input" name="name" value="{{nowName}}" />
              </view>
            </view>
          </view>

          <view class="weui-cells__h1">Phone</view>
          <view class="weui-cells weui-cells_after-title">
            <view class="weui-cell weui-cell_input">
              <view class="weui-cell__bd">
                <input class="weui-input" name="phone" value="{{nowPhone}}" />
              </view>
            </view>
          </view>
        </view>
        <view class="weui-btn-area">
          <button class="weui-btn" type="default" bindtap="noneWindows">Cancel</button>
          <button class="weui-btn" type="default" formType="submit">Submit</button>
        </view>
      </form>
    </view>
  </view>
</view>
